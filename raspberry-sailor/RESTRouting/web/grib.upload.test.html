<!DOCTYPE html>
<html>
<head>
	<title>GRIB</title>
	<link rel="icon" type="image/jpg" href="icons/palm.04.jpg">
	<!--meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /-->
	<link id="page-ux" rel="stylesheet" href="css/stylesheet.css" type="text/css"/>
	<script type="text/javascript">
		let uploadInspector = () => {
			let file = document.getElementById('GRIB-file');
			console.log('Aha');
		};

		function xhrUpload() {
		  const form = document.getElementById("grib-upload");
		  const xhr = new XMLHttpRequest();
		  responseHandler(xhr);
		  const formData = new FormData(form);
		  xhr.open("POST", "/grib/process-grib-file"); // "http://localhost/FileStreamServer/file/upload");
		  xhr.send(formData);
		}

		function responseHandler(xhr) {
		  xhr.onreadystatechange = function() {
			if (xhr.readyState === 4) {
			  uploadResponse(xhr);
			}
		  }
		}

		function uploadResponse(xhr) {
		  if (xhr.status >= 200 && xhr.status < 300) {
			alert("Upload successful.");
		  } else {
			alert("Upload failed: " + xhr.responseText);
		  }
		}

	</script>
</head>
<body>
  <h2>GRIB Upload API tests</h2>

    <!-- on form: onsubmit="xhrUpload(); return false;" -->
	<form id="grib-upload"> <!-- action="/grib/process-grib-file" method="POST" enctype="multipart/form-data"> -->
		<input type="file" id="GRIB-file" name="file">
		<input type="submit" value="Proceed" onclick="xhrUpload();">
	</form>

  	<div style="margin-top:5px">
		<button onclick="xhrUpload()">Upload using XHR</button>
	</div>

	<hr/>
	<address>Oliv did it.</address>
</body>
</html>